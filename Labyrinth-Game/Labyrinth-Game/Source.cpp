#include <Windows.h>
#include <iostream>
#include <string>
#include <thread>
#include <vector>
#include <random>

#include "Game.h"

void ScrollText(std::string Text) {

	for (auto i : Text) {
		std::cout << i;
		int random = rand() % 20 + 10;
		Sleep(random);
	}
}

void MatrixText(std::string Text) {
	CONSOLE_SCREEN_BUFFER_INFO SCRBUF = {};
	GetConsoleScreenBufferInfo(GetStdHandle(STD_OUTPUT_HANDLE), &SCRBUF);

	bool Matrix = true;
	std::string TempStr;
	DWORD BytesWritten = NULL;

	while (Matrix) {

		for (int i = 0; i < 30; i++) {
			Sleep(35);
			TempStr.clear();

			for (int k = 0; k < Text.size(); k++) {
				COORD ConsoleCoord = { SCRBUF.dwCursorPosition.X + k, SCRBUF.dwCursorPosition.Y };

				WriteConsoleOutputCharacterA(GetStdHandle(STD_OUTPUT_HANDLE), " ", sizeof(char), ConsoleCoord, &BytesWritten);
			}
			SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), SCRBUF.dwCursorPosition);
			for (auto j : Text) {
				if (rand() % 10 < 3) { TempStr.push_back(rand() % 60 + 30); }
				else { TempStr.push_back(j); }
			}

			std::cout << TempStr;
		}
		for (int k = 0; k < Text.size(); k++) {
			COORD ConsoleCoord = { SCRBUF.dwCursorPosition.X + k, SCRBUF.dwCursorPosition.Y };

			WriteConsoleOutputCharacterA(GetStdHandle(STD_OUTPUT_HANDLE), " ", sizeof(char), ConsoleCoord, &BytesWritten);
		}
		SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), SCRBUF.dwCursorPosition);
		std::cout << Text;
		Matrix = false;
	}
}


int main() {
	SetConsoleTitle(L"Very Easy Labyrinth-Game by Instagibz");

	int Sel = 0;
	//ScrollText("What game you wanna play?\n\n1.) EZ LITTLE BALLS NUB MODE\n2.) TRUE MANLY BALLS MODE\n");
	ScrollText("What game you wanna play?");
	std::cout << "\n\n";
	MatrixText("1.) EZ LITTLE BALLS NUB MODE\n");
	MatrixText("2.) TRUE MANLY BALLS MODE\n");


	std::cin >> Sel;
	std::string GameStr;

	if (Sel == 1) {
		system("cls");
		MatrixText("Starting ez pz everytime mode\n");
		Sleep(1500);

		GameStr = "##################\n"
			".*###******#######\n"
			"#*###*####*###***!\n"
			"#*****####*###*###\n"
			"#####******###***#\n"
			"#######*######*###\n"
			"######*********###\n"
			"#******###*###*###\n"
			"#######****###*###\n"
			"#######*######*###\n"
			"#######********###\n"
			"##################\n";
	}


	else if (Sel == 2) {
		system("cls");
		MatrixText("Starting consistent big balls mode in...\n");
		Sleep(500);
		MatrixText("3...\n");
		Sleep(1000);
		MatrixText("2...\n");
		Sleep(1000);
		MatrixText("1...\n");
		Sleep(1000);
		system("cls");
		std::cout << "##################\n"
			".*###******#######\n"
			"#*###*####*###***!\n"
			"#*****####*###*###\n"
			"#####******###***#\n"
			"#######*######*###\n"
			"######*********###\n"
			"#******###*###*###\n"
			"#######****###*###\n"
			"#######*######*###\n"
			"#######********###\n"
			"##################\n" << std::endl;
		Sleep(3000);
		system("cls");
		MatrixText("Naw i am just kidding...\n");
		ScrollText("HERE it is.\n");
		Sleep(500);

		GameStr = "#######################################################################################################################################################\n"
			".**#*****#********#********#**#*****#********#********#*****#********#********#**#********#*****#*****#*****#********#*****#********#**************#**#\n"
			"#**#**#**#**#**#**#######**#**#**####**#**####**####**####**#**####**#**####**#**#**####**#**#**#**#**#**#**####**####**#**####**#**#**##########**#**#\n"
			"#*****#*****#**#********#**************#***********#********#*****#**#**#*****#*****#*****#**#*****#**#**#***********#**#*****#**#**#**#*****#*****#**#\n"
			"#############**#######**####**#**####**################**#######**#**#**##########**#######**##########**#######**#**#**#**#**####**#**#**#**#**####**#\n"
			"#*****#********#********#*****#*****#**#*****#********#**#********#**#*****#*****#*****#*****#***********#********#*****#**#********#**#**#**#********#\n"
			"#**####**#######**#############**####**#**#**#**#**####**#**#######**####**#**#**####**#**####**##########**#############**####**#######**#**#**#######\n"
			"#********#*****#*****************#*****#**#*****#**#*****#**#********#*****#**#**#*****#********#***********#*****#*****#*****#***********#**#**#*****#\n"
			"##########**#**###################**####**#######**#**####**#**#######**####**#**#**####**#######**#**##########**#**#**####**#############**#**####**#\n"
			"#*****#*****#********#*****#*****#********#********#*****#**#********#*****#**#**#*****#**#********#**#*****#*****#**#*****#*****#***********#*****#**#\n"
			"#**####**##########**#**#**#**#**##########**####**####**#**#######**#**####**#**####**#**#############**#**#**##########**#######**#############**#**#\n"
			"#***********#***********#*****#**#***********#**#**#**#**#*****#*****#*****#**#*****#**#***********#*****#**#*****#********#*****************#*****#**#\n"
			"##########**#**####**##########**#**##########**#**#**#**####**#**#######**#**####**#**#**#######**#**####**#**####**#######**####**#**####**#**####**#\n"
			"#***********#**#*****#*****#*****#*****#********#*****#********#**#********#*****#**#**#*****#*****#**#*****#*****************#*****#**#********#*****#\n"
			"#**#############**#######**#**#######**#**#######**#**##########**#**##########**#**#**#######**####**#############**##########**#######**##########**#\n"
			"#**#***********#********#*****#***********#**#*****#*****#********#**#*****#**#**#*****#*****#**#***********#*****#**#***********#**#**************#**#\n"
			"#**##########**#######**##########**#######**#**#######**#**#######**#**#**#**#**#**####**#**#**#**#######**#**####**#############**#**#**#######**#**#\n"
			"#*****#*****#********#***********#**#*****#**************#**************#********#*****#**#*****#********#***********#**************#**#**#***********#\n"
			"####**#**#**####**#**####**####**#**#**#**#**####**################**################**#**############################**####**####**####**#**##########\n"
			"#**#**#**#*****#**#**#**#*****#**#**#**#**#**#*****#*****#*****#*****#********************#*****#***********#***********#*****#**#********#*****#*****#\n"
			"#**#**#**####**#**#**#**#######**####**#**####**#######**#**####**####**#############**#######**#**#######**#**####**####**####**#############**#**#**#\n"
			"#*****#*****#*****#*****#*****#********#********#********#**#*****#**#********#*****#**#*****#**#*****#**#*****#********#**#*****#*****#********#**#**#\n"
			"##########**#############**#**##########**#######**#######**#**####**####**#**#**#**#**#**#**#**####**#**################**#**#**#**#**#**#######**####\n"
			"#**#*****#**************#**#***********#********#*****#**#*****#***********#*****#**#**#**#**#*****#**#*****#***********#*****#**#**#*****#*****#*****#\n"
			"#**#**#**#############**#**#######**#**#######**####**#**####**###################**#**####**####**#**#**#**#**#######**#######**#**##########**####**#\n"
			"#*****#********#**#*****#**#********#**************#**#*****#**#*****************#**#**#*****#*****#**#**#*****#********#*****#**#***********#**#*****#\n"
			"#**##########**#**#**#######**################**#**#**####**####**#######**####**####**#**#######**#**################**#**#**#**#######**#**#**#**####\n"
			"#**#*****#*****#**#*****#*****#***********#*****#*****#***********#********#**#********#**#*****#********************#**#**#*****#*****#**#**#**#**#**#\n"
			"#**#**#**#**####**#**####**####**#**####**#**#############**################**##########**####**####**#############**#**#**#######**#**#**#**#**#**#**#\n"
			"#*****#**#********#********#*****#*****#**#*****#***********#**************#***********#**#********#********#*****#*****#**#********#**#**#*****#*****#\n"
			"#######**#######**##########**#######**#**#######**######################**#**#######**#**#**####**##########**#**#######**#**#######**#**#######**#**#\n"
			"#********#*****#********************#**#***********#********************#********#*****#*****#*****#***********#***********#**#********#*****#**#**#**#\n"
			"##########**#**######################**#**##########**################**##########**##########**####**######################**#**##########**#**#**#**#\n"
			"#*****#*****#*****#********#*****#*****#***********#**#*****#********#***********#**#***********#**#**#********#*****#*****#**#***********#********#**#\n"
			"#**#**#**#######**#**#**#**#**#**#**#############**#**#**#**#**####**##########**#**#**####**####**#**#**####**#**####**#**#**#**#############**####**#\n"
			"#**#*****#*****#**#**#**#*****#*****#**************#*****#*****#********#***********#**#*****#**#********#*****#********#*****#**#**************#*****#\n"
			"#**#######**#**#**#**#**#############**#######**################**#**####**####**####**#**####**##########**#############**####**#**#############**####\n"
			"#*****#*****#**#*****#*****#***********#*****#*****#*****#********#*****#*****#********#**#**#**************#***********#*****#**#**#*****************#\n"
			"####**#**################**#**#############**####**#**####**##########**####**##########**#**#**#############**#######**####**####**#**#############**#\n"
			"#*****#********************#*****************#*****#*****************#*****#********************************#********#********************************!\n"
			"#######################################################################################################################################################\n";

		RECT ConsoleRect;
		HWND ConsoleWindow = GetConsoleWindow();
		GetWindowRect(ConsoleWindow, &ConsoleRect);
		MoveWindow(ConsoleWindow, ConsoleRect.left, ConsoleRect.top, 1250, 800, TRUE);

	}
	else {
		std::cout << "BITCH PLS..." << std::endl;
		Sleep(3000);
		return 0;
	}

	//create game object
	Labyrinth_Game Game(GameStr);

	//enter gameloop
	Game.GameLoop();

	Sleep(5000);
	return 0;
}
